<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Interactive Word Cloud (Simplified)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 20px;
      background: #f9f9f9;
      color: #333;
    }

    h1 {
      text-align: center;
    }

    main {
      max-width: 1200px;
      margin: auto;
      text-align: center;
    }

    .filter-controls {
      margin: 20px 0;
    }

    label {
      font-weight: bold;
      margin-right: 8px;
    }

    select {
      padding: 6px 10px;
      font-size: 16px;
    }

    .cloud-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      margin-top: 20px;
      margin-bottom: 20px;
    }

    .word {
      margin: 5px 10px;
      font-size: 20px;
      font-weight: bold;
      color: #000;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .social {
      color: #ff6b6b;
    }

    .addiction {
      color: #4dabf7;
    }

    .students {
      color: #38d9a9;
    }

    .slider-container {
      margin: 20px 0;
    }

    .slider-container input {
      width: 100%;
      margin: 10px 0;
    }

    #breadth-label {
      font-weight: bold;
    }

    @media (max-width: 768px) {
      .slider-container input {
        width: 80%;
        margin: auto;
      }
    }
  </style>
</head>
<body>

<main role="main">
  <h1>Interactive Word Cloud (Simplified)</h1>

  <section class="filter-controls">
    <label for="filter">Filter by keyword group:</label>
    <select id="filter" aria-controls="word-cloud" aria-label="Select keyword group">
      <option value="all">Show All</option>
      <option value="social">Social Media</option>
      <option value="addiction">Addiction</option>
      <option value="students">University Students</option>
    </select>
  </section>

  <section class="cloud-container" id="word-cloud">
    <!-- Words will be dynamically added here -->
  </section>

  <section class="slider-container">
    <label for="slider-breadth">Move the slider to display broader and narrower terms.</label>
    <input type="range" id="slider-breadth" min="0" max="100" value="50" aria-label="Move the slider to display broader and narrower terms" />
    <br>
    <span id="breadth-label" role="status" aria-live="polite">Text</span>
  </section>
</main>

<script>
  const wordGroups = {
    social: {
      broader: ['social networks', 'online spaces', 'online communication'],
      focus: ['social media'],
      narrower: ['Instagram', 'TikTok', 'social media likes', 'group chats'],
    },
    addiction: {
      broader: ['negative effects', 'habit', 'excessive use', 'reliance', 'dependency'],
      focus: ['addiction'],
      narrower: ['compulsive behaviour', 'internet addiction', 'doomscrolling'],
    },
    students: {
      broader: ['young people', 'young adults', 'generation Z'],
      focus: ['university students'],
      narrower: ['first year undergraduates', 'UK students', 'arts and humanities students'],
    }
  };

  let currentFilter = 'all';
  let breadth = 50;  // Default breadth (middle)

  // Function to render the word cloud based on breadth
  function renderCloud() {
    const wordContainer = document.getElementById('word-cloud');
    wordContainer.innerHTML = '';  // Clear the previous content

    // Determine the words to display based on breadth
    let wordsToDisplay = [];

    if (breadth <= 33) {
      // Show only broader terms
      if (currentFilter === 'all' || currentFilter === 'social') wordsToDisplay = wordsToDisplay.concat(wordGroups.social.broader);
      if (currentFilter === 'all' || currentFilter === 'addiction') wordsToDisplay = wordsToDisplay.concat(wordGroups.addiction.broader);
      if (currentFilter === 'all' || currentFilter === 'students') wordsToDisplay = wordsToDisplay.concat(wordGroups.students.broader);
    } else if (breadth >= 67) {
      // Show only narrower terms
      if (currentFilter === 'all' || currentFilter === 'social') wordsToDisplay = wordsToDisplay.concat(wordGroups.social.narrower);
      if (currentFilter === 'all' || currentFilter === 'addiction') wordsToDisplay = wordsToDisplay.concat(wordGroups.addiction.narrower);
      if (currentFilter === 'all' || currentFilter === 'students') wordsToDisplay = wordsToDisplay.concat(wordGroups.students.narrower);
    } else {
      // Show focus terms (the starter keywords)
      if (currentFilter === 'all' || currentFilter === 'social') wordsToDisplay = wordsToDisplay.concat(wordGroups.social.focus);
      if (currentFilter === 'all' || currentFilter === 'addiction') wordsToDisplay = wordsToDisplay.concat(wordGroups.addiction.focus);
      if (currentFilter === 'all' || currentFilter === 'students') wordsToDisplay = wordsToDisplay.concat(wordGroups.students.focus);
    }

    // Create HTML elements for each word
    wordsToDisplay.forEach(word => {
      const wordElement = document.createElement('span');
      wordElement.classList.add('word');
      
      // Assign a color based on the category
      if (wordGroups.social.focus.includes(word)) {
        wordElement.classList.add('social');
      } else if (wordGroups.addiction.focus.includes(word)) {
        wordElement.classList.add('addiction');
      } else if (wordGroups.students.focus.includes(word)) {
        wordElement.classList.add('students');
      }

      wordElement.textContent = word;
      wordContainer.appendChild(wordElement);
    });
  }

  // Function to handle filter change
  document.getElementById('filter').addEventListener('change', (e) => {
    currentFilter = e.target.value;
    renderCloud();
  });

  // Function to handle breadth slider change
  document.getElementById('slider-breadth').addEventListener('input', (e) => {
    breadth = e.target.value;
    document.getElementById('breadth-label').textContent = breadth <= 33 ? 'Broader Terms' : breadth >= 67 ? 'Narrower Terms' : 'Moderate Breadth (Both Broader and Narrower Terms)';
    renderCloud();
  });

  // Initial render
  renderCloud();
</script>

</body>
</html>
